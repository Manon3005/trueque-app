<app-header 
  title="Mi cuenta"
  buttonIcon="log-out-outline"
  (click)="logout()">
</app-header>
<ion-content>
  <ion-split-pane>
    <ion-menu side="start">
      <ion-content>
        <ion-list>
          <ion-menu-toggle auto-hide="false">
            <ion-item routerLink="/search" routerDirection="root" routerLinkActive="selected">
              <ion-icon slot="start" name="search-outline"></ion-icon>
              <ion-label>Buscar productos</ion-label>
            </ion-item>
            <ion-item routerLink="/favorites" routerDirection="root" routerLinkActive="selected">
              <ion-icon slot="start" name="heart-outline"></ion-icon>
              <ion-label>Ver tus favoritos</ion-label>
            </ion-item>
            <ion-item routerLink="/new" routerDirection="root" routerLinkActive="selected">
              <ion-icon slot="start" name="add-circle-outline"></ion-icon>
              <ion-label>Crear nuevo producto</ion-label>
            </ion-item>
            <ion-item routerLink="/messages" routerDirection="root" routerLinkActive="selected">
              <ion-icon slot="start" name="chatbubbles-outline"></ion-icon>
              <ion-label>Ver tus mensajes</ion-label>
            </ion-item>
            <ion-item routerLink="/account" routerDirection="root" routerLinkActive="selected">
              <ion-icon slot="start" name="person-outline"></ion-icon>
              <ion-label>Ver tu cuenta</ion-label>
            </ion-item>
          </ion-menu-toggle>
        </ion-list>
      </ion-content>
    </ion-menu>
    <ion-content>
      <div class="contenido">
        <div class="perfil">
          <div class="avatar-wrapper" (click)="chooseImage()">
            <ion-avatar>
              <img [src]="avatarUrl" alt="avatar" />
            </ion-avatar>
            <input type="file" #filePicker accept="image/*" hidden (change)="onFileSelected($event)">
          </div>
          <h3>{{user().rut}}</h3>
        </div>

        <div class="datos">
          <h4>Mis datos</h4>
          <app-input label="Nombre de usuario" placeholder="" [value]="user().username" [hasButtonEdit]="true" (validate)="onUpdateUsername($event)"></app-input>
          <app-input label="Correo electrónico" placeholder="" [value]="user().email" [hasButtonEdit]="true" (validate)="onUpdateEmail($event)"></app-input>
          <app-input label="Región" placeholder="" [value]="user().region" [hasButtonEdit]="true" (validate)="onUpdateRegion($event)"></app-input>
          <app-input label="Comuna" placeholder="" [value]="user().city" [hasButtonEdit]="true" (validate)="onUpdateCity($event)"></app-input>
        </div>
        <ion-button color="danger" (click)="confirmDelete()">Eliminar cuenta</ion-button>

        <div class="anuncios">
          <h4>Mis anuncios</h4>
          <p *ngIf="userProducts().length == 0">No anuncio.</p>
          <ion-grid>
            <ion-row>
              <ion-col *ngFor="let product of userProducts()" size="6" size-md="4" size-lg="2" class="ion-no-padding">
                <app-product-card [title]="product.title" [imageURL]="product.images[0]" [id]="product.id"></app-product-card>
              </ion-col>
            </ion-row>
          </ion-grid>
        </div>
      </div>
    </ion-content>
  </ion-split-pane>
</ion-content>